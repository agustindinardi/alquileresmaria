{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 85vh;">
  <div class="card shadow p-4" style="width: 100%; max-width: 500px;">
    <h2 class="text-center mb-4">Registro de Usuario</h2>

    <form method="post" novalidate>
      {% csrf_token %}
      {{ user_form.as_p }}
      {{ perfil_form.as_p }}

      <button type="submit" class="btn btn-success w-100 mt-2" disabled>Registrarse</button>
    </form>

    <div class="text-center mt-3">
      ¿Ya tienes una cuenta? <a href="{% url 'usuarios:login' %}">Inicia sesión</a>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const form = document.querySelector("form");
  const submitButton = form.querySelector("button[type='submit']");

  function validarCampos() {
    const campos = form.querySelectorAll("input, select, textarea");
    let validos = true;
    for (let campo of campos) {
      if (campo.type !== "hidden" && campo.hasAttribute("required") && !campo.value.trim()) {
        validos = false;
        break;
      }
    }
    submitButton.disabled = !validos;
  }

  form.querySelectorAll("input, select, textarea").forEach(input => {
    if (input.type !== "hidden") {
      input.addEventListener("input", validarCampos);
      input.addEventListener("change", validarCampos);
    }
  });

  validarCampos();
});
</script>
{% endblock %}
